# /validate ‚Äî –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ workflow

–ó–∞–ø—É—Å–∫–∞–µ—Ç contract testing –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ n8n workflow.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```
/validate {workflow_id}           # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π workflow —á–µ—Ä–µ–∑ API
/validate                         # –°–ø—Ä–æ—Å–∏—Ç ID –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ
/validate all                     # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ workflow
/validate --file {path}           # –û—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º: –∑–∞–≥—Ä—É–∑–∏—Ç—å workflow –∏–∑ JSON-—Ñ–∞–π–ª–∞
```

### –û—Ñ—Ñ–ª–∞–π–Ω —Ç–µ—Å—Ç –±–µ–∑ n8n instance:
```
/validate --file ./test/sample-workflow.json
```

## validate all ‚Äî –∞–ª–≥–æ—Ä–∏—Ç–º —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
1. –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å: `GET /api/v1/workflows?limit=100` (–≤—Å–µ workflow, –≤–∫–ª—é—á–∞—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ)
   - –î–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö: –¥–æ–±–∞–≤–∏—Ç—å `?active=true&limit=100`
2. –ï—Å–ª–∏ –≤ –æ—Ç–≤–µ—Ç–µ –µ—Å—Ç—å `nextCursor` ‚Üí –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å —Å `?cursor={nextCursor}` –¥–æ –∏—Å—á–µ—Ä–ø–∞–Ω–∏—è
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ workflow –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑
4. –í—ã–≤–µ—Å—Ç–∏ —Å–≤–æ–¥–Ω—É—é —Ç–∞–±–ª–∏—Ü—É: –∏–º—è, —Å—Ç–∞—Ç—É—Å (active/inactive), –∫–æ–ª-–≤–æ CRITICAL/WARNING/CONFIG
5. –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É workflow

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç
1. –ï—Å–ª–∏ knowledge-—Ñ–∞–π–ª—ã –µ—â—ë –Ω–µ –ø—Ä–æ—á–∏—Ç–∞–Ω—ã –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏ ‚Üí –ø—Ä–æ—á–∏—Ç–∞—Ç—å `knowledge/contract-testing.md`, `knowledge/n8n-data-flow.md`, `knowledge/flowlint-rules.md`. –ï—Å–ª–∏ —É–∂–µ –ø—Ä–æ—á–∏—Ç–∞–Ω—ã ‚Üí –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç —à–∞–≥
2. **[–®–∞–≥ 0 ‚Äî –Ω–∞—Ç–∏–≤–Ω—ã–π –∞—É–¥–∏—Ç]** –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Security Audit n8n:
   ```bash
   curl -s -X POST \
     -H "X-N8N-API-KEY: $N8N_API_KEY" \
     -H "Content-Type: application/json" \
     "$N8N_BASE_URL/api/v1/audit" -d '{}'
   ```
   –†–µ–∑—É–ª—å—Ç–∞—Ç—ã (credentials risks, risky nodes) –≤–∫–ª—é—á–∏—Ç—å –≤ —Å–µ–∫—Ü–∏—é üîß CONFIG –æ—Ç—á—ë—Ç–∞.
   > –ï—Å–ª–∏ endpoint –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (n8n Cloud –∏–ª–∏ –Ω–µ—Ç –ø—Ä–∞–≤) ‚Äî –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å, –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –±–µ–∑ –Ω–µ–≥–æ.
3. –ü–æ–ª—É—á–∞–µ—Ç workflow JSON —á–µ—Ä–µ–∑ n8n API: `GET /api/v1/workflows/{id}`
4. –ó–∞–ø—É—Å–∫–∞–µ—Ç sub-agent Parser (parser.md) –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è contracts
5. –ó–∞–ø—É—Å–∫–∞–µ—Ç FlowLint-–ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º R1‚ÄìR10 (–∏–∑ knowledge/flowlint-rules.md)
6. –ó–∞–ø—É—Å–∫–∞–µ—Ç sub-agent Reporter (reporter.md) –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞
7. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ç—á—ë—Ç –≤ `history/{id}_{timestamp}.json`
8. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç ID –≤ `.last_workflow_id` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥–∞–º–∏ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
9. –í—ã–≤–æ–¥–∏—Ç –æ—Ç—á—ë—Ç —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
10. –ñ–¥—ë—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º fix

## –®–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å workflow
```bash
curl -H "X-N8N-API-KEY: $N8N_API_KEY" \
     "$N8N_BASE_URL/api/v1/workflows/$WORKFLOW_ID"
```

### –®–∞–≥ 2: –ü–∞—Ä—Å–∏–Ω–≥
–ü–µ—Ä–µ–¥–∞—Ç—å –≤ sub-agent `parser` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è inputs/outputs –∫–∞–∂–¥–æ–π –Ω–æ–¥—ã.

### –®–∞–≥ 3: –ê–Ω–∞–ª–∏–∑ contracts
–î–ª—è –∫–∞–∂–¥–æ–≥–æ connection: —Å—Ä–∞–≤–Ω–∏—Ç—å provider outputs vs consumer inputs.
–£—á–µ—Å—Ç—å:
- Conditional outputs (if/else branches)
- Fallback operators (|| ??)
- Optional chaining (?.)
- Sub-workflows (—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ)

### –®–∞–≥ 4: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞
–ü–µ—Ä–µ–¥–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –≤ sub-agent `reporter` –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç—á—ë—Ç–∞.

### –®–∞–≥ 5: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á—ë—Ç
./scripts/save-history.sh "$WORKFLOW_ID" "/tmp/report_${WORKFLOW_ID}.json"

# –ó–∞–ø–æ–º–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π workflow
echo "$WORKFLOW_ID" > .last_workflow_id
```
–î–ª—è –∫–∞–∂–¥–æ–≥–æ CRITICAL: –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–∞—Ç—á.
–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é. –ñ–¥–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.

## –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞
Markdown-–æ—Ç—á—ë—Ç –ø—Ä—è–º–æ –≤ Claude Code + —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ history/.
