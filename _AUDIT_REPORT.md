# Contract Validator Agent ‚Äî –ê—É–¥–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

> ‚ö†Ô∏è **[STALE]** –≠—Ç–æ—Ç –∞—É–¥–∏—Ç –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –≤–µ—Ä—Å–∏–∏ –¥–æ v5.0. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º (K1-K7, Z2, Z7) –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–∫ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫—É—é —Å–ø—Ä–∞–≤–∫—É, –Ω–µ –∫–∞–∫ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∫ –¥–µ–π—Å—Ç–≤–∏—é.

**–î–∞—Ç–∞:** 2026-02-22
**–ê—É–¥–∏—Ç–æ—Ä:** Claude Opus 4.6 (DeepEval methodology)
**–û–±—ä—ë–º:** 25 —Ñ–∞–π–ª–æ–≤, ~2800 —Å—Ç—Ä–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ + –∫–æ–¥–∞
**–í–µ—Ä–¥–∏–∫—Ç:** –ö—Ä–µ–ø–∫–∏–π –∞–≥–µ–Ω—Ç —Å 7 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ –∏ 12 –≤–∞–∂–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏

---

## –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞

| –ê—Å–ø–µ–∫—Ç | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|--------|--------|-------------|
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | üü¢ –û—Ç–ª–∏—á–Ω–æ | –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ: CLAUDE.md ‚Üí agents ‚Üí commands ‚Üí knowledge ‚Üí scripts |
| **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å** | üü° –•–æ—Ä–æ—à–æ —Å –æ–≥–æ–≤–æ—Ä–∫–∞–º–∏ | 90% –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–æ –µ—Å—Ç—å –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è –≤ API –∏ –ø—Ä–æ–±–µ–ª—ã –≤ AST-–ø–∞—Ä—Å–µ—Ä–µ |
| **–ü–æ–ª–Ω–æ—Ç–∞** | üü° –•–æ—Ä–æ—à–æ | –ü–æ–∫—Ä—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –Ω–æ –ø—Ä–æ–ø—É—â–µ–Ω—ã edge cases |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | üü¢ –û—Ç–ª–∏—á–Ω–æ | –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª credentials safety –ø—Ä–∏ PUT |
| **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–µ–º–æ—Å—Ç—å** | üî¥ –ü—Ä–æ–±–ª–µ–º—ã | Windows-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å, skills path, –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ —Ä–∞–∑–¥—É–≤–∞–Ω–∏–µ |
| **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** | üü¢ –û—Ç–ª–∏—á–Ω–æ | –ï—Å—Ç—å sample-workflow.json —Å –æ–∂–∏–¥–∞–µ–º—ã–º–∏ –±–∞–≥–∞–º–∏ |

---

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ (7)

### K1. –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ API –º–µ—Ç–æ–¥–∞ activate/deactivate –≤ `/fix`

**–§–∞–π–ª:** `.claude/commands/fix.md`

**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç—Ä–æ–∫–∞ 26 –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≥–æ–≤–æ—Ä–∏—Ç:
```
f. –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ä–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –µ—Å–ª–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∏: PATCH /api/v1/workflows/{id}/activate
```

–ù–æ —Å—Ç—Ä–æ–∫–∞ 70 —Ç–æ–≥–æ –∂–µ —Ñ–∞–π–ª–∞ –∏ CLAUDE.md (—Å—Ç—Ä–æ–∫–∏ 233-235) –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–∫–∞–∑—ã–≤–∞—é—Ç **POST**, –∞ –Ω–µ PATCH:
```bash
POST $N8N_BASE_URL/api/v1/workflows/$WORKFLOW_ID/activate
```

**–†–∏—Å–∫:** Claude –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PATCH –≤–º–µ—Å—Ç–æ POST, —á—Ç–æ –≤–µ—Ä–Ω—ë—Ç 404/405 –æ—Ç n8n API. Workflow –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

**–§–∏–∫—Å:**
```
–°—Ç—Ä–æ–∫–∞ 26, fix.md:
-   f. –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ä–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –µ—Å–ª–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∏: PATCH /api/v1/workflows/{id}/activate
+   f. –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ä–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –µ—Å–ª–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∏: POST /api/v1/workflows/{id}/activate
```

---

### K2. –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–º–µ–Ω–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è: N8N_BASE_URL vs N8N_API_URL

**–§–∞–π–ª—ã:** –í—Å–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–≤–µ —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ URL:
- `.env.example`, `CLAUDE.md`, `fetch-workflow.sh`, `validate.md` ‚Üí **N8N_BASE_URL**
- `.mcp.json.example`, `MCP_INSTALL.md` ‚Üí **N8N_API_URL**

–ü—Ä–∏—á–∏–Ω–∞: n8n-mcp –ø–∞–∫–µ—Ç –æ–∂–∏–¥–∞–µ—Ç `N8N_API_URL`, –∞ —Å–∫—Ä–∏–ø—Ç—ã –∞–≥–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `N8N_BASE_URL`.

**–†–∏—Å–∫:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–∏—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é. –°–∫—Ä–∏–ø—Ç—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, MCP –Ω–µ—Ç ‚Äî –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç.

**–§–∏–∫—Å:** –î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:
1. –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ `N8N_BASE_URL` –≤–µ–∑–¥–µ + –¥–æ–±–∞–≤–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –≤ `.mcp.json`:
   ```json
   "N8N_API_URL": "${N8N_BASE_URL}"
   ```
2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –û–ë–ï –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env.example` —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º:
   ```env
   N8N_BASE_URL=https://your-n8n.com    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–∞–º–∏ –∞–≥–µ–Ω—Ç–∞
   N8N_API_URL=https://your-n8n.com     # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è n8n-mcp (–¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å!)
   ```

---

### K3. AST-–ø–∞—Ä—Å–µ—Ä –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç node reference –ø–∞—Ç—Ç–µ—Ä–Ω—ã

**–§–∞–π–ª:** `scripts/ast-parser.js`

**–ü—Ä–æ–±–ª–µ–º–∞:** –§—É–Ω–∫—Ü–∏—è `extractConsumer()` (—Å—Ç—Ä–æ–∫–∞ 157) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¢–û–õ–¨–ö–û `$json.field`:
```javascript
if (node.object.type === 'Identifier' && node.object.name === '$json')
```

–ù–ï –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è:
- `$('NodeName').first().json.field` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –Ω–æ–¥—É
- `$input.first().json.field` ‚Äî generic input
- `$input.item.json.field` ‚Äî item access
- `$node["NodeName"].json.field` ‚Äî —É—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

Regex-fallback (`parseWithRegex`) —Ç–æ–∂–µ –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç node-reference –∏ `$input` –ø–∞—Ç—Ç–µ—Ä–Ω—ã ‚Äî —Ç–æ–ª—å–∫–æ `item.json.field` –¥–ª—è `executeOnce` —Ä–µ–∂–∏–º–∞.

**–†–∏—Å–∫:** –ê–≥–µ–Ω—Ç –Ω–∞–π–¥—ë—Ç —Ç–æ–ª—å–∫–æ –ø—Ä—è–º—ã–µ `$json.field` –æ–±—Ä–∞—â–µ–Ω–∏—è, –ø—Ä–æ–ø—É—Å—Ç–∏–≤ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ Consumer-–ø–∞—Ç—Ç–µ—Ä–Ω—ã. –ù–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö workflow —Å `$('Node').first().json.field` (–æ—á–µ–Ω—å —á–∞—Å—Ç—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω) –∞–≥–µ–Ω—Ç –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å 0 consumers —É —Ç–∞–∫–∏—Ö –Ω–æ–¥.

**–§–∏–∫—Å:** –î–æ–±–∞–≤–∏—Ç—å –≤ `extractConsumer()`:
```javascript
// $('NodeName').first().json.field ‚Äî CallExpression chain
// $input.first().json.field
// –≠—Ç–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Ç—Ä–µ–±—É—é—Ç traversal –≤–≤–µ—Ä—Ö –ø–æ AST-–¥–µ—Ä–µ–≤—É MemberExpression chain
```

–ò –≤ `parseWithRegex()` –¥–æ–±–∞–≤–∏—Ç—å:
```javascript
// $('NodeName').first().json.field
for (const m of clean.matchAll(/\$\(['"]([^'"]+)['"]\)\.(?:first|last|item)\(\)?\.json\.(\w+)/g)) {
  consumers.push({ field: m[2], hasFallback: false, nodeRef: m[1] });
}
// $input.first().json.field
for (const m of clean.matchAll(/\$input\.(?:first|item)\(\)?\.json\.(\w+)/g)) {
  consumers.push({ field: m[1], hasFallback: false, nodeRef: null });
}
```

---

### K4. KNOWLEDGE.md –¥—É–±–ª–∏—Ä—É–µ—Ç knowledge/ —Ñ–∞–π–ª—ã ‚Üí –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ —Ä–∞–∑–¥—É–≤–∞–Ω–∏–µ

**–§–∞–π–ª:** `KNOWLEDGE.md` (366 —Å—Ç—Ä–æ–∫)

**–ü—Ä–æ–±–ª–µ–º–∞:** KNOWLEDGE.md —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª–Ω—É—é –∫–æ–ø–∏—é:
- `knowledge/contract-testing.md` (—Ä–∞–∑–¥–µ–ª—ã 1-4)
- `knowledge/n8n-data-flow.md` (—Ä–∞–∑–¥–µ–ª—ã 2-7)
- `knowledge/regex-patterns.md` (—Ä–∞–∑–¥–µ–ª 3)
- `knowledge/report-format.md` (—Ä–∞–∑–¥–µ–ª 7)

–ü—Ä–∏ —ç—Ç–æ–º `validate.md` (—Å—Ç—Ä–æ–∫–∞ 27) –∏–Ω—Å—Ç—Ä—É–∫—Ç–∏—Ä—É–µ—Ç –∞–≥–µ–Ω—Ç–∞ –¢–ê–ö–ñ–ï —á–∏—Ç–∞—Ç—å `knowledge/contract-testing.md`, `knowledge/n8n-data-flow.md`, `knowledge/flowlint-rules.md`.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Claude –∑–∞–≥—Ä—É–∂–∞–µ—Ç ~1500 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä—É—é—â–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ 200K —ç—Ç–æ 5-8K —Ç–æ–∫–µ–Ω–æ–≤ –≤–ø—É—Å—Ç—É—é. –ù–∞ —Å–ª–æ–∂–Ω—ã—Ö workflow —Å 50+ –Ω–æ–¥–∞–º–∏ —ç—Ç–æ –º–æ–∂–µ—Ç –≤—ã—Ç–µ—Å–Ω–∏—Ç—å –ø–æ–ª–µ–∑–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç.

**–§–∏–∫—Å:** –ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å KNOWLEDGE.md –≤ **–∏–Ω–¥–µ–∫—Å** (30-40 —Å—Ç—Ä–æ–∫):
```markdown
# Knowledge Base Index

## –ß—Ç–æ –≥–¥–µ –Ω–∞–π—Ç–∏
| –¢–µ–º–∞ | –§–∞–π–ª | –ö–æ–≥–¥–∞ —á–∏—Ç–∞—Ç—å |
|------|------|-------------|
| –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, –º–∞—Ç—Ä–∏—Ü–∞ —É—Ä–æ–≤–Ω–µ–π | knowledge/contract-testing.md | –ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∞–Ω–∞–ª–∏–∑–æ–º |
| n8n data flow, —Ç–∏–ø—ã –Ω–æ–¥, –ø–∞—Ä—Å–∏–Ω–≥ | knowledge/n8n-data-flow.md | –ü—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ –Ω–æ–¥ |
| FlowLint R1-R10 | knowledge/flowlint-rules.md | –ü—Ä–∏ FlowLint –ø—Ä–æ–≤–µ—Ä–∫–µ |
| Regex-–ø–∞—Ç—Ç–µ—Ä–Ω—ã | knowledge/regex-patterns.md | –ü—Ä–∏ fallback –±–µ–∑ acorn |
| –§–æ—Ä–º–∞—Ç –æ—Ç—á—ë—Ç–∞ | knowledge/report-format.md | –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–∞ |

## –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è (–Ω–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –≤ knowledge/)
- –í—ã–±–æ—Ä Mermaid + ASCII –¥–ª—è –≥—Ä–∞—Ñ–æ–≤ (–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: ...)
- PactFlow —á–µ—Ä–µ–∑ REST API, –Ω–µ MCP (–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: ...)
```

---

### K5. –ü—Ä–æ–ø—É—â–µ–Ω —à–∞–≥ 4 –≤ validate.md

**–§–∞–π–ª:** `.claude/commands/validate.md`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù—É–º–µ—Ä–∞—Ü–∏—è —à–∞–≥–æ–≤ –∏–¥—ë—Ç: –®–∞–≥ 1, –®–∞–≥ 2, –®–∞–≥ 3, **–®–∞–≥ 5** (—Å—Ç—Ä–æ–∫–∞ 66). –®–∞–≥ 4 –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

**–†–∏—Å–∫:** Claude –º–æ–∂–µ—Ç —Ä–µ—à–∏—Ç—å, —á—Ç–æ —à–∞–≥ 4 ‚Äî —ç—Ç–æ –Ω–µ—è–≤–Ω—ã–π —à–∞–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, FlowLint –ø—Ä–æ–≤–µ—Ä–∫–∞), –∏ –Ω–∞—á–∞—Ç—å –∏–º–ø—Ä–æ–≤–∏–∑–∏—Ä–æ–≤–∞—Ç—å. –ò–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —á—Ç–æ-—Ç–æ –≤–∞–∂–Ω–æ–µ.

**–§–∏–∫—Å:** –î–æ–±–∞–≤–∏—Ç—å –®–∞–≥ 4 –∏–ª–∏ –ø–µ—Ä–µ–Ω—É–º–µ—Ä–æ–≤–∞—Ç—å.

---

### K6. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ disabled –Ω–æ–¥

**–§–∞–π–ª—ã:** –í—Å–µ knowledge/ –∏ CLAUDE.md

**–ü—Ä–æ–±–ª–µ–º–∞:** n8n workflow –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å disabled –Ω–æ–¥—ã (`"disabled": true`). –ù–∏–≥–¥–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–µ —Å–∫–∞–∑–∞–Ω–æ, –∫–∞–∫ —Å –Ω–∏–º–∏ –ø–æ—Å—Ç—É–ø–∞—Ç—å:
- –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å contracts? (–ø–æ–ª–µ–∑–Ω–æ ‚Äî –º–æ–≥—É—Ç –±—ã—Ç—å re-enabled)
- –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å? (—É–º–µ–Ω—å—à–∞–µ—Ç —à—É–º)
- –ü–æ–º–µ—á–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ?

**–†–∏—Å–∫:** –ê–≥–µ–Ω—Ç –º–æ–∂–µ—Ç:
1. –°–æ–∑–¥–∞—Ç—å CRITICAL –Ω–∞ disabled –Ω–æ–¥—É (false positive, –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ)
2. –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å disabled –Ω–æ–¥—É, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è Provider –¥–ª—è enabled Consumer (false negative)

**–§–∏–∫—Å:** –î–æ–±–∞–≤–∏—Ç—å –≤ CLAUDE.md –∏ parser.md:
```markdown
### Disabled –Ω–æ–¥—ã
- –ï—Å–ª–∏ `node.disabled === true` ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –∫–∞–∫ Consumer (–Ω–µ —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ)
- –ù–û! –ï—Å–ª–∏ disabled –Ω–æ–¥–∞ —è–≤–ª—è–µ—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º Provider –ø–æ–ª—è ‚Üí WARNING:
  "Provider '{name}' –æ—Ç–∫–ª—é—á–µ–Ω–∞. Consumer '{consumer}' –Ω–µ –ø–æ–ª—É—á–∏—Ç –ø–æ–ª–µ '{field}' –ø—Ä–∏ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."
- –í –æ—Ç—á—ë—Ç–µ: –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å–µ–∫—Ü–∏—è "‚è∏Ô∏è DISABLED NODES (N)"
```

---

### K7. –ù–µ—Ç Windows-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

**–§–∞–π–ª—ã:** –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã, QUICKSTART.md

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ 4 —Å–∫—Ä–∏–ø—Ç–∞ ‚Äî bash (`#!/usr/bin/env bash`). –ù–∞ Windows:
- `chmod +x scripts/*.sh` (QUICKSTART —à–∞–≥ 1) ‚Äî –±–µ—Å–ø–æ–ª–µ–∑–µ–Ω –±–µ–∑ WSL/Git Bash
- `/dev/stdin` –≤ ast-parser.js (—Å—Ç—Ä–æ–∫–∞ 31) ‚Äî –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∞ Windows
- `date +"%Y%m%d_%H%M%S"` ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Git Bash, –Ω–æ –Ω–µ –≤ PowerShell
- `comm -13` –≤ diff_reports.sh ‚Äî —Ç—Ä–µ–±—É–µ—Ç GNU coreutils

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ Windows 11. Claude Code –Ω–∞ Windows –∏—Å–ø–æ–ª—å–∑—É–µ—Ç bash —á–µ—Ä–µ–∑ Git Bash –∏–ª–∏ –∞–Ω–∞–ª–æ–≥, –Ω–æ —ç—Ç–æ –Ω–∏–≥–¥–µ –Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ.

**–§–∏–∫—Å:**
1. –í QUICKSTART.md –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é "Windows":
   ```markdown
   ## Windows
   Claude Code –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Git Bash. –°–∫—Ä–∏–ø—Ç—ã —Å–æ–≤–º–µ—Å—Ç–∏–º—ã.
   –£–±–µ–¥–∏—Å—å, —á—Ç–æ `jq` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `choco install jq` –∏–ª–∏ `scoop install jq`
   ```
2. –í ast-parser.js –∑–∞–º–µ–Ω–∏—Ç—å `--stdin` –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞ (—É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `--file`)
3. –î–æ–±–∞–≤–∏—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É `chmod +x`: "–ù–∞ Windows —ç—Ç–æ—Ç —à–∞–≥ –Ω–µ –Ω—É–∂–µ–Ω ‚Äî Claude Code –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç—ã —á–µ—Ä–µ–∑ `bash scripts/...`"

---

## üü° –í–ê–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ (12)

### V1. Conditional returns –Ω–µ –¥–µ—Ç–µ–∫—Ç–∏—Ä—É—é—Ç—Å—è AST-–ø–∞—Ä—Å–µ—Ä–æ–º

**–§–∞–π–ª:** `scripts/ast-parser.js`

**–ü—Ä–æ–±–ª–µ–º–∞:** `extractProviderFromReturn()` –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞—ë—Ç `conditional = false`:
```javascript
if (node.type === 'ReturnStatement' && node.argument) {
  extractProviderFromReturn(node.argument, false);  // ‚Üê –≤—Å–µ–≥–¥–∞ false
}
```

–ß—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å conditional, –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ ReturnStatement –≤–Ω—É—Ç—Ä–∏ IfStatement/ConditionalExpression. –¢–µ–∫—É—â–∏–π –∫–æ–¥ —ç—Ç–æ–≥–æ –ù–ï –¥–µ–ª–∞–µ—Ç.

**–í–ª–∏—è–Ω–∏–µ:** –í—Å–µ provider-–ø–æ–ª—è –±—É–¥—É—Ç –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ `conditional: false`, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –≤–Ω—É—Ç—Ä–∏ `if/else`. CRITICAL issues –±—É–¥—É—Ç –ø–æ–Ω–∏–∂–µ–Ω—ã –¥–æ WARNING –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

### V2. Regex fallback: `||` fallback detection –Ω–µ–Ω–∞–¥—ë–∂–µ–Ω

**–§–∞–π–ª:** `scripts/ast-parser.js`, `knowledge/regex-patterns.md`

**–ü—Ä–æ–±–ª–µ–º–∞:** Fallback –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑:
```javascript
const after = fullSrc.slice(pos, pos + 4).trim();
const hasFallback = after.startsWith('||') || after.startsWith('??');
```

–ù–æ –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–µ–ª –∏–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏ –º–µ–∂–¥—É `$json.field` –∏ `||`:
```javascript
const x = $json.field
  || defaultValue;
```
‚Äî fallback –ù–ï –±—É–¥–µ—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω (pos+4 –Ω–µ –¥–æ—Å—Ç–∞–Ω–µ—Ç –¥–æ `||`).

**–§–∏–∫—Å:** –£–≤–µ–ª–∏—á–∏—Ç—å –æ–∫–Ω–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É—á–∏—Ç—ã–≤–∞—Ç—å whitespace:
```javascript
const after = fullSrc.slice(pos, pos + 20).replace(/\s+/g, '');
```

---

### V3. FlowLint R8: maxIterations –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —É Split In Batches

**–§–∞–π–ª:** `knowledge/flowlint-rules.md`

**–ü—Ä–æ–±–ª–µ–º–∞:** R8 –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
```javascript
if (!options.maxIterations && !workflow.settings?.timeout)
```

–ù–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –Ω–æ–¥–∞ `Split In Batches` –≤ n8n **–Ω–µ –∏–º–µ–µ—Ç** –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `maxIterations` –≤ `options`. –£ –Ω–µ—ë –µ—Å—Ç—å `batchSize` (default: 10) –∏ `reset` (bool).

**–í–ª–∏—è–Ω–∏–µ:** R8 –±—É–¥–µ—Ç –í–°–ï–ì–î–ê —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–ª—è Split In Batches –Ω–æ–¥, —Å–æ–∑–¥–∞–≤–∞—è 100% false positive. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –Ω–∞—Å—Ç–æ—è—â–∞—è –∑–∞—â–∏—Ç–∞ ‚Äî `workflow.settings.executionTimeout`.

**–§–∏–∫—Å:** –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å R8:
```javascript
// –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ–ª—å–∫–æ workflow-level timeout
if (!workflow.settings?.executionTimeout) {
  ‚Üí R8: "Workflow –±–µ–∑ executionTimeout. Split In Batches –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å."
}
```

---

### V4. –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ HTTP Request –∫–∞–∫ Provider

**–§–∞–π–ª—ã:** `knowledge/n8n-data-flow.md`, `parser.md`

**–ü—Ä–æ–±–ª–µ–º–∞:** HTTP Request –Ω–æ–¥–∞ ‚Äî –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —á–∞—Å—Ç—ã—Ö —Ç–∏–ø–æ–≤ –≤ n8n workflow. –ï—ë Provider-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ—Ç–≤–µ—Ç–∞ API –∏ –≤ –æ–±—â–µ–º —Å–ª—É—á–∞–µ UNCERTAIN. –ù–æ –≤ n8n-data-flow.md (—Å—Ç—Ä–æ–∫–∞ 91) —Å–∫–∞–∑–∞–Ω–æ —Ç–æ–ª—å–∫–æ:
```
HTTP Request | —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç API ‚Üí UNCERTAIN
```

–û–¥–Ω–∞–∫–æ –º–Ω–æ–≥–∏–µ HTTP Request –Ω–æ–¥—ã –∏–º–µ—é—Ç `responseFormat: 'json'` –∏ –æ—Ç–≤–µ—Ç –º–∞–ø–ø–∏—Ç—Å—è –≤ `$json` –Ω–∞–ø—Ä—è–º—É—é. –ê–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Ö–æ—Ç—è –±—ã –ø—ã—Ç–∞—Ç—å—Å—è –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å JSON Response Mapping, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω.

---

### V5. validate.md –∏–Ω—Å—Ç—Ä—É–∫—Ç–∏—Ä—É–µ—Ç —á–∏—Ç–∞—Ç—å knowledge/ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º validate

**–§–∞–π–ª:** `.claude/commands/validate.md`, —Å—Ç—Ä–æ–∫–∞ 27

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
1. –ß–∏—Ç–∞–µ—Ç knowledge/contract-testing.md, knowledge/n8n-data-flow.md, knowledge/flowlint-rules.md
```

–ü—Ä–∏ –∫–∞–∂–¥–æ–º `/validate` –∞–≥–µ–Ω—Ç –±—É–¥–µ—Ç –ø–µ—Ä–µ—á–∏—Ç—ã–≤–∞—Ç—å ~600 —Å—Ç—Ä–æ–∫ knowledge-—Ñ–∞–π–ª–æ–≤, —Ö–æ—Ç—è –æ–Ω–∏ –Ω–µ –º–µ–Ω—è—é—Ç—Å—è. –° K4 (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ KNOWLEDGE.md) —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ ~1500 —Å—Ç—Ä–æ–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –Ω–∞ –∫–∞–∂–¥—ã–π –≤—ã–∑–æ–≤.

**–§–∏–∫—Å:** –î–æ–±–∞–≤–∏—Ç—å –≤ validate.md:
```
1. –ï—Å–ª–∏ knowledge-—Ñ–∞–π–ª—ã –µ—â—ë –Ω–µ –ø—Ä–æ—á–∏—Ç–∞–Ω—ã –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏ ‚Üí –ø—Ä–æ—á–∏—Ç–∞—Ç—å.
   –ï—Å–ª–∏ —É–∂–µ –ø—Ä–æ—á–∏—Ç–∞–Ω—ã ‚Üí –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç —à–∞–≥.
```

---

### V6. Reporter agent –Ω–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç CONFIG issues –≤ JSON-–∏—Å—Ç–æ—Ä–∏–∏

**–§–∞–π–ª:** `.claude/agents/reporter.md`

**–ü—Ä–æ–±–ª–µ–º–∞:** JSON-—Ñ–æ—Ä–º–∞—Ç –æ—Ç—á—ë—Ç–∞ (—Å—Ç—Ä–æ–∫–∞ 102) –≤–∫–ª—é—á–∞–µ—Ç `"level": "CONFIG"`, –Ω–æ —Ñ–æ—Ä–º–∞—Ç id –¥–ª—è CONFIG issues (`CONFIG|R1|node_name`) –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ñ–æ—Ä–º–∞—Ç–∞ –¥–ª—è contract issues (`CRITICAL|field|Consumer|Provider`).

Diff-—Å–∫—Ä–∏–ø—Ç (`diff_reports.sh`) –ø–∞—Ä—Å–∏—Ç id —á–µ—Ä–µ–∑ `|` –Ω–∞ 4 —á–∞—Å—Ç–∏: `level|field|consumer|provider`. –î–ª—è CONFIG issues –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ 3 —á–∞—Å—Ç–∏ ‚Äî diff —Å–ª–æ–º–∞–µ—Ç—Å—è.

**–§–∏–∫—Å:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç id:
```
CONFIG issues: "CONFIG|R1|node_name|" (4 –ø–æ–ª—è, provider –ø—É—Å—Ç–æ–π)
–ò–ª–∏: "CONFIG|R1_retryOnFail|node_name|workflow"
```

---

### V7. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `validate all` ‚Äî –ø–∞–≥–∏–Ω–∞—Ü–∏—è —Å nextCursor

**–§–∞–π–ª:** `.claude/commands/validate.md`

**–ü—Ä–æ–±–ª–µ–º–∞:** validate.md –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é (—Å—Ç—Ä–æ–∫–∏ 19-24):
```
1. GET /api/v1/workflows?limit=100
2. –ï—Å–ª–∏ nextCursor ‚Üí –ø–æ–≤—Ç–æ—Ä–∏—Ç—å
```

–ù–æ n8n REST API –¥–ª—è workflows –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `cursor`, –Ω–µ `nextCursor` –≤ –æ—Ç–≤–µ—Ç–µ. –ê–∫—Ç—É–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:
```json
{ "data": [...], "nextCursor": "abc123" }
```

–í–ø—Ä–æ—á–µ–º, —ç—Ç–æ –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –≤–µ—Ä—Å–∏–∏ n8n. –°—Ç–æ–∏—Ç —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ñ–æ—Ä–º–∞—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –≤ self-hosted vs Cloud.

---

### V8. PactFlow –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚Äî –Ω–µ–ø–æ–ª–Ω–∞—è –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω–∞—è

**–§–∞–π–ª:** `KNOWLEDGE.md` (—Å—Ç—Ä–æ–∫–∏ 301-326)

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–ø–∏—Å–∞–Ω–∏–µ PactFlow REST API –≤–∫–ª—é—á–∞–µ—Ç endpoint:
```
PUT /contracts/provider/{name}/consumer/{name}/version/{version}
```

–≠—Ç–æ –ù–ï —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π PactFlow API endpoint. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π PactFlow API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
```
PUT /pacts/provider/{provider}/consumer/{consumer}/version/{version}
```

**–í–ª–∏—è–Ω–∏–µ:** –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PactFlow –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é, –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 404.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –õ–∏–±–æ —É–±—Ä–∞—Ç—å PactFlow —Ä–∞–∑–¥–µ–ª (–æ–Ω –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π), –ª–∏–±–æ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å API endpoints –ø–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

---

### V9. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ expression –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö (–Ω–µ jsCode)

**–§–∞–π–ª—ã:** `parser.md`, `knowledge/regex-patterns.md`

**–ü—Ä–æ–±–ª–µ–º–∞:** Regex-–ø–∞—Ç—Ç–µ—Ä–Ω—ã PATTERN_EXPRESSION_JSON –∏ PATTERN_EXPRESSION_NODE –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ regex-patterns.md, –Ω–æ:
1. ast-parser.js –∏—Ö –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–æ–æ–±—â–µ
2. parser.md –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è UI –Ω–æ–¥ (IF, Set, Switch), –Ω–æ –Ω–µ –æ–±—ä—è—Å–Ω—è–µ—Ç –ö–ê–ö —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –ø—Ä–æ–π—Ç–∏ –ø–æ –≤—Å–µ–º string-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –Ω–æ–¥—ã

–ú–Ω–æ–≥–∏–µ –Ω–æ–¥—ã (HTTP Request, Google Sheets, Slack –∏ —Ç.–¥.) —Å–æ–¥–µ—Ä–∂–∞—Ç expressions –≤ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –≤–∏–¥–∞ `={{ $json.fieldName }}`.

---

### V10. Sub-agent parser ‚Äî –Ω–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–µ–∂–∏–º—É –≤—ã–∑–æ–≤–∞

**–§–∞–π–ª:** `.claude/agents/parser.md`

**–ü—Ä–æ–±–ª–µ–º–∞:** Parser agent –æ–ø–∏—Å–∞–Ω —Å `tools: [bash]`, –Ω–æ –Ω–µ –æ–±—ä—è—Å–Ω–µ–Ω–æ:
1. –ö–∞–∫ –∏–º–µ–Ω–Ω–æ –≥–ª–∞–≤–Ω—ã–π –∞–≥–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç workflow JSON –≤ sub-agent?
2. Sub-agent –ø–æ–ª—É—á–∞–µ—Ç –≤–µ—Å—å JSON —á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç? –ß–µ—Ä–µ–∑ —Ñ–∞–π–ª?
3. –ö–∞–∫ sub-agent –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç nodeContracts –≥–ª–∞–≤–Ω–æ–º—É?

–í Claude Code sub-agents –æ–±—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç. –ù—É–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å –∫–æ–Ω–≤–µ–Ω—Ü–∏—é –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö.

**–§–∏–∫—Å:** –î–æ–±–∞–≤–∏—Ç—å –≤ parser.md:
```markdown
## –ü—Ä–æ—Ç–æ–∫–æ–ª –≤—ã–∑–æ–≤–∞
–ì–ª–∞–≤–Ω—ã–π –∞–≥–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç:
- –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É workflow JSON: /tmp/workflow_{id}.json
Sub-agent –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
- JSON-–æ–±—ä–µ–∫—Ç nodeContracts –≤ stdout
```

---

### V11. QUICKSTART –∑–∞–≥–æ–ª–æ–≤–æ–∫ vs —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ ‚Äî 5 vs 6 —à–∞–≥–æ–≤

**–§–∞–π–ª:** `QUICKSTART.md`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≥–æ–≤–æ—Ä–∏—Ç "5 —à–∞–≥–æ–≤", –Ω–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ 6 —à–∞–≥–æ–≤ (–®–∞–≥ 1 ‚Üí –®–∞–≥ 6).

---

### V12. –ù–µ –ø–æ–∫—Ä—ã—Ç—ã Trigger-–Ω–æ–¥—ã –∫–∞–∫ Provider

**–§–∞–π–ª—ã:** `parser.md`, `knowledge/n8n-data-flow.md`

**–ü—Ä–æ–±–ª–µ–º–∞:** Webhook, Schedule Trigger, Manual Trigger ‚Äî –≤—Å—ë —ç—Ç–æ Provider-–Ω–æ–¥—ã (–æ–Ω–∏ —Å–æ–∑–¥–∞—é—Ç –ø–µ—Ä–≤—ã–π item –≤ —Ü–µ–ø–æ—á–∫–µ). –ù–æ –∏—Ö Provider-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–∏–≥–¥–µ –Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω:
- Webhook: —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ ‚Üí `$json.body`, `$json.headers`, `$json.query`
- Schedule Trigger: –ø—É—Å—Ç–æ–π item
- Manual Trigger: –ø—É—Å—Ç–æ–π item –∏–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ê–≥–µ–Ω—Ç –Ω–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫–∏–µ –ø–æ–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å–ª–µ Webhook. Consumer –ø–æ—Å–ª–µ Webhook, —á–∏—Ç–∞—é—â–∏–π `$json.body.text`, –Ω–µ –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

## ‚ÑπÔ∏è –ó–ê–ú–ï–ß–ê–ù–ò–Ø (8)

### Z1. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ç—Ä–∏—Ü—ã —É—Ä–æ–≤–Ω–µ–π –≤ 3 —Ñ–∞–π–ª–∞—Ö
CLAUDE.md (—Å—Ç—Ä–æ–∫–∏ 99-117), KNOWLEDGE.md (—Ä–∞–∑–¥–µ–ª 4), knowledge/contract-testing.md (—Ä–∞–∑–¥–µ–ª 2) ‚Äî –∏–¥–µ–Ω—Ç–∏—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã = knowledge/contract-testing.md. –û—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî —É–±—Ä–∞—Ç—å –∏–ª–∏ –¥–∞—Ç—å —Å—Å—ã–ª–∫—É.

### Z2. –ù–µ—Ç package.json
–ê–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `npm install --save-dev acorn`, –Ω–æ –Ω–µ—Ç `package.json`. –ù—É–∂–µ–Ω —Ö–æ—Ç—è –±—ã –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π:
```json
{ "name": "contract-validator-agent", "private": true, "devDependencies": { "acorn": "^8.0.0" } }
```

### Z3. diff_reports.sh –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç CONFIG issues
–°–∫—Ä–∏–ø—Ç –ø–∞—Ä—Å–∏—Ç `summary.critical`, `summary.warning`, `summary.info` ‚Äî –Ω–æ –Ω–µ `summary.config`. –î–æ–±–∞–≤–∏—Ç—å:
```bash
OLD_CONF=$(jq '.summary.config' "$FILE_OLD" 2>/dev/null || echo "?")
```
–£–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ (—Å—Ç—Ä–æ–∫–∏ 48-49), –Ω–æ –≤ trend display (—Å—Ç—Ä–æ–∫–∏ 53-57) –ø—Ä–æ–±–µ–ª –≤ —ç–º–æ–¥–∑–∏ INFO –º–æ–∂–µ—Ç –ª–æ–º–∞—Ç—å –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ.

### Z4. `.mcp.json.example` –≤–∫–ª—é—á–∞–µ—Ç filesystem MCP —Å `./history` –∏ `./knowledge`
–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –ø–æ–ª–µ–∑–Ω–æ. –ù–æ –Ω–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –∑–∞—á–µ–º filesystem MCP —á–∏—Ç–∞–µ—Ç `./knowledge` ‚Äî –∞–≥–µ–Ω—Ç –∏ —Ç–∞–∫ –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ Claude Code.

### Z5. sample-workflow.json: `_testNotes` —É–ø–æ–º–∏–Ω–∞–µ—Ç 3 CRITICAL –∏ 1 INFO
–ù–æ –ø–æ –ª–æ–≥–∏–∫–µ –∞–≥–µ–Ω—Ç–∞:
- `confidence_score` ‚Üí CRITICAL (–≤–µ—Ä–Ω–æ)
- `image_url` ‚Üí CRITICAL (–≤–µ—Ä–Ω–æ)
- `author` ‚Üí CRITICAL (–≤–µ—Ä–Ω–æ ‚Äî –Ω–µ—Ç fallback, –Ω–∏–≥–¥–µ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è)
- `imageUrl` dead field ‚Üí INFO (–≤–µ—Ä–Ω–æ)
–¢–µ—Å—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π.

### Z6. Webhook R9 ‚Äî –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç `parameters.options.rawBody`
Webhook —Å `rawBody: true` —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è signature verification (Stripe, GitHub). R9 –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ Code –Ω–æ–¥—ã —Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –ø–æ–¥–ø–∏—Å–∏ –≤ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ, –Ω–µ —Ç–æ–ª—å–∫–æ `authentication`.

### Z7. –ù–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞
–ù–µ—Ç `version` –Ω–∏–≥–¥–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∞—è –≤–µ—Ä—Å–∏—è —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–∞. –î–æ–±–∞–≤–∏—Ç—å –≤ CLAUDE.md:
```markdown
**Agent version:** 5.0
**Last updated:** 2026-02-22
```

### Z8. PactFlow MCP –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è
KNOWLEDGE.md (—Å—Ç—Ä–æ–∫–∞ 303) –∏ MCP_INSTALL.md (—Å—Ç—Ä–æ–∫–∞ 128) –æ–±–∞ –≥–æ–≤–æ—Ä—è—Ç "–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ MCP-–ø–∞–∫–µ—Ç–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç". –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞.

---

## –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –Ω–∞—Ö–æ–¥–∫–∏

| –ß—Ç–æ | –ü–æ—á–µ–º—É —Ö–æ—Ä–æ—à–æ |
|-----|---------------|
| **Credential safety –≤ /fix** | –ü–æ–¥—Ä–æ–±–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª: –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å id/credentials/typeVersion –ø—Ä–∏ PUT. –≠—Ç–æ —Å–ø–∞—Å—ë—Ç –æ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª–æ–º–æ–∫ |
| **typeVersion-aware –ø–∞—Ä—Å–∏–Ω–≥** | –ü–æ–∫—Ä—ã—Ç—ã Set v2/v3, IF v1/v2, Switch v2/v3, Code v1/v2 ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö workflow |
| **Merge bug #15981** | –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –±–∞–≥ n8n —Å workaround. –≠—Ç–æ —É—Ä–æ–≤–µ–Ω—å production-ready –∑–Ω–∞–Ω–∏—è |
| **stripComments() —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º template literals** | –£–º–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: template literal `\`Hello ${$json.name}\`` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç consumer-–ø–∞—Ç—Ç–µ—Ä–Ω |
| **FlowLint R1-R10** | –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π config audit –ø–æ–≤–µ—Ä—Ö contract testing. –î–æ–±–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å |
| **Brace counting –¥–ª—è Provider** | –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –≤–º–µ—Å—Ç–æ –Ω–∞–∏–≤–Ω–æ–≥–æ `[^}]+` regex. –†–∞–±–æ—Ç–∞–µ—Ç —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ |
| **sample-workflow.json —Å _testNotes** | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π acceptance test. –ú–æ–∂–Ω–æ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∞–≥–µ–Ω—Ç–∞ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ n8n |
| **History rotation** | save-history.sh —Ö—Ä–∞–Ω–∏—Ç 10 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—Ç—á—ë—Ç–æ–≤, —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç growth |
| **Dual graph format** | Mermaid + ASCII ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≤ GitHub, –∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ |
| **Sub-workflow —Ä–µ–∫—É—Ä—Å–∏—è —Å –∑–∞—â–∏—Ç–æ–π** | –§–∞–π–ª-based visited tracking (/tmp/cv_visited_workflows.txt) + depth limit 5 |
| **LangChain Output Parser –∞–Ω–∞–ª–∏–∑** | –ó–Ω–∞–Ω–∏–µ –æ Structured Output Parser –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–µ Provider-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ |
| **Python Code node support** | –ü–æ–∫—Ä—ã—Ç—ã _json, _input –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è Python-–Ω–æ–¥ |

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –¥–µ–ø–ª–æ–µ–º (–±–ª–æ–∫–µ—Ä—ã)

1. **K1** ‚Äî –ò—Å–ø—Ä–∞–≤–∏—Ç—å PATCH ‚Üí POST –≤ fix.md (1 —Å—Ç—Ä–æ–∫–∞)
2. **K2** ‚Äî –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å N8N_BASE_URL / N8N_API_URL (5 —Ñ–∞–π–ª–æ–≤)
3. **K3** ‚Äî –î–æ–±–∞–≤–∏—Ç—å node-reference –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤ ast-parser.js (25 —Å—Ç—Ä–æ–∫)
4. **K5** ‚Äî –ü–µ—Ä–µ–Ω—É–º–µ—Ä–æ–≤–∞—Ç—å —à–∞–≥–∏ –≤ validate.md
5. **K7** ‚Äî –î–æ–±–∞–≤–∏—Ç—å Windows-–ø—Ä–∏–º–µ—á–∞–Ω–∏—è –≤ QUICKSTART.md

### –ü–µ—Ä–µ–¥ production use (–≤–∞–∂–Ω—ã–µ)

6. **K4** ‚Äî Refactor KNOWLEDGE.md –≤ –∏–Ω–¥–µ–∫—Å (—É–±—Ä–∞—Ç—å –¥—É–ø–ª–∏–∫–∞—Ç—ã)
7. **V1** ‚Äî –î–æ–±–∞–≤–∏—Ç—å conditional detection –≤ AST-–ø–∞—Ä—Å–µ—Ä
8. **V2** ‚Äî –ò—Å–ø—Ä–∞–≤–∏—Ç—å fallback detection (—É–≤–µ–ª–∏—á–∏—Ç—å –æ–∫–Ω–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)
9. **V3** ‚Äî –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å R8 (—É–±—Ä–∞—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π maxIterations)
10. **V6** ‚Äî –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å CONFIG issue id format –¥–ª—è diff
11. **K6** ‚Äî –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É disabled –Ω–æ–¥
12. **V12** ‚Äî –û–ø–∏—Å–∞—Ç—å Trigger-–Ω–æ–¥—ã –∫–∞–∫ Provider

### –ü—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏

13. **V5** ‚Äî –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ —á—Ç–µ–Ω–∏–µ knowledge/
14. **V10** ‚Äî –û–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É sub-agents
15. **Z2** ‚Äî –°–æ–∑–¥–∞—Ç—å package.json
16. **Z7** ‚Äî –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

---

## –†–µ–∑—é–º–µ

–ê–≥–µ–Ω—Ç **—Ö–æ—Ä–æ—à–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω** —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π Claude Code (agents, commands, knowledge, scripts). –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –≥–ª—É–±–∏–Ω–∞ –≤–ø–µ—á–∞—Ç–ª—è–µ—Ç ‚Äî typeVersion-aware –ø–∞—Ä—Å–∏–Ω–≥, Merge bug #15981, brace counting, LangChain Output Parser awareness.

–û—Å–Ω–æ–≤–Ω—ã–µ —Å–ª–∞–±–æ—Å—Ç–∏:
1. **AST-–ø–∞—Ä—Å–µ—Ä –ø–æ–∫—Ä—ã–≤–∞–µ—Ç ~40% consumer-–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤** (—Ç–æ–ª—å–∫–æ `$json.field`). –≠—Ç–æ —Å–∞–º—ã–π –±–æ–ª—å—à–æ–π gap ‚Äî –±–µ–∑ node-reference –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∞–≥–µ–Ω—Ç –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ CRITICAL issues –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö workflow.
2. **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ —Ä–∞–∑–¥—É–≤–∞–Ω–∏–µ** —á–µ—Ä–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ KNOWLEDGE.md / knowledge/ ‚Äî –Ω–∞ —Å–ª–æ–∂–Ω—ã—Ö workflow —ç—Ç–æ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π.
3. **–ú–µ–ª–∫–∏–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è** (API –º–µ—Ç–æ–¥, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ) ‚Äî –ª–µ–≥–∫–æ —Ñ–∏–∫—Å—è—Ç—Å—è, –Ω–æ –º–æ–≥—É—Ç —Å–ª–æ–º–∞—Ç—å –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å 5 –±–ª–æ–∫–µ—Ä–æ–≤ (30 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã), –∑–∞—Ç–µ–º K3 + V1 (AST-–ø–∞—Ä—Å–µ—Ä, 1-2 —á–∞—Å–∞), –∑–∞—Ç–µ–º –¥–µ–ø–ª–æ–∏—Ç—å.
